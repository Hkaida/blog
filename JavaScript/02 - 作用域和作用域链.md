# JavaScript 作用域和作用域链



## 什么是作用域？

作用域(scope)是指各个变量、函数的可访问范围。在变量和函数定义的时候就已经确定了。

作用域(scope)是一套规则，规定了在哪里查找变量。

#### 1. 局部作用域

**实例1：**

```javascript

function fn() {
    var str = "fn1";
    console.log(str);
    // 函数内可调用 str 变量
}
fn();
console.log(str); //此处无法调用 str 变量
```

上面代码中，函数 fn 中声明了一个变量 str ，这种是只能在函数内部区域起作用的**局部变量**，而在函数外部是无法访问的。因此，由函数声明而界定的作用域也被称作**函数作用域**。

------

**实例2：**

```javascript
if (true) {
    let a;
}
console.log(a); // 报错，a 没有定义

while (true) {
    let b;
}
console.log(b); // 报错，b 没有定义

{
    let c;
}
console.log(c); // 报错，c 没有定义

function fn () {
    let d;
}
console.log(d); // 报错，d 没有定义; 这并不奇怪，var 声明也会导致报错
```

上面代码中，所有变量都是 `let`关键字声明的。它们的作用域由最近的一对花括号`{}`界定，这种被称为**块级作用域**。

（`const`关键字声明的常量也是如此）

#### 2. 全局作用域

在函数或者代码块`{}`最外层声明的变量是**全局变量**，在整个 JavaScript 脚本（包括函数和代码块）里都可使用，拥有**全局作用域**。

```javascript
var str = "fn1";
function fn() {
    console.log(str);
    // 此处可调用 str 变量
}

fn();

console.log(str); //此处也可调用 str 变量
```



## 作用域链

我们说过，作用域是根据名称查找变量的一套规则。实际情况中，通常需要同时顾及几个 作用域。
当一个块或函数嵌套在另一个块或函数中时，就发生了作用域的嵌套。因此，在当前作用 域中无法找到某个变量时，引擎就会在外层嵌套的作用域中继续查找，直到找到该变量， 或抵达最外层的作用域（也就是全局作用域）为止。


